<div class="row-fluid">
  <div class="page-header">
    <% restaurant = @restaurant %>
    <h1><%= restaurant.name %></h1>
  </div>
</div>

<div class="row-fluid">
  <div class="span7">
    <h4 class="lead"><i class="icon-cloud"></i> Word Cloud</h2>
    <script type="text/javascript">
      console.log('Testing console');
      var oldWordArray = <%=raw @words.to_json %>;
      var newWordArray = []
      for (var i = 0; i < oldWordArray.length; ++i) newWordArray.push({text: oldWordArray[i].word, weight: oldWordArray[i].weight});
      $(function() {
        $("#wordcloud").jQCloud(newWordArray);
        console.log(newWordArray);
      });
    </script>
    <div id="wordcloud" style="width: 550px; height: 350px;"></div> 
  </div>

  <!-- To check words in cloud, uncomment
  <table class="table table-hover">
    <thead>
      <tr>
        <th>Word</th>
        <th>Count</th>
      </tr>
    </thead>
    <tbody>
        <% @words.each do |resto| %>
        <tr>
          <td><%= resto.word %></td>
          <td><%= resto.count %></td>
        </tr>
        <% end %>
    </tbody>
  </table>
  -->

  <div class="span5">
    <h4 class="lead"><i class="icon-twitter"></i> Tweets</h4> 
    <ul class="tweets">
      <% @tweets.each do |tweet| %>
        <li>
          <h5 class="lead">
            <% if tweet.label == 1 %>
              <i class="icon-smile pull-right"></i>
            <% else %>
              <i class="icon-frown pull-right"></i>
            <% end %>
          </h5>
          <%= tweet.body %>
        </li>
      <% end %>
    </ul>

  </div>
</div>
